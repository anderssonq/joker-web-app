const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AppHeader-DNdBA9B7.js","assets/index-B7WGjRQQ.js","assets/index-DzlFaQct.css","assets/AppHeader-D_BhYRbn.css","assets/AppJokeList-CA1Dey_A.js","assets/AppToolBar-D5bMz7cC.js","assets/AppToolBar-Cd-EaMyC.css","assets/AppFormJoke-DdUVAVnb.js","assets/AppFormJoke-ogxJc11O.css","assets/AppFooter-BFkuijAl.js","assets/AppFooter-niuzjq2D.css"])))=>i.map(i=>d[i]);
import{r as l,c as E,w as x,d as X,l as Z,s as _,T as M,a as ee,J as v,b as te,o as oe,M as O,e as ae,f as I,g as j,h as se,u as g,i as m,j as ne,k as b,m as re,n as ce,F as ue,_ as P,p as le}from"./index-B7WGjRQQ.js";const D="https://official-joke-api.appspot.com";async function ie(){const s=await fetch(`${D}/types`);if(!s.ok)throw new Error("Error fetching joke types");return await s.json()}async function pe(){const s=await fetch(`${D}/jokes/random/451`);if(!s.ok)throw new Error("Error fetching jokes");return await s.json()}function ge(s){const c=l(1),n=l(5),i=E(()=>s()),r=E(()=>Math.max(1,Math.ceil(i.value.length/n.value))),d=E(()=>{const o=(c.value-1)*n.value;return i.value.slice(o,o+n.value)});function p(o){o<1&&(o=1),o>r.value&&(o=r.value),c.value=o}function y(o){n.value=o,p(1)}return x([i,n],()=>{(c.value-1)*n.value>=i.value.length&&c.value!==1&&p(1)}),{getCurrentPage:()=>c.value,getPerPage:()=>n.value,getPaginatedItems:()=>d.value,getTotalPages:()=>r.value,setPage:p,setPerPage:y}}const de=X("jokes",()=>{const s=l([]),c=l(-1),n=l("none"),i=l([]),r=l(""),d=l(!1),p=l(null),y=["setup-asc","setup-desc","rating-desc","rating-asc","type-asc","type-desc","by-user"],o=l("setup-asc"),C={"setup-asc":(e,t)=>e.setup.localeCompare(t.setup),"setup-desc":(e,t)=>t.setup.localeCompare(e.setup),"rating-desc":(e,t)=>(t.rating??0)-(e.rating??0),"rating-asc":(e,t)=>(e.rating??0)-(t.rating??0),"type-asc":(e,t)=>e.type.localeCompare(t.type)||e.setup.localeCompare(t.setup),"type-desc":(e,t)=>t.type.localeCompare(e.type)||e.setup.localeCompare(t.setup),"by-user":()=>0},J=E(()=>{let e=[...S()];return r.value&&r.value!=="general"&&(e=e.filter(t=>t.type===r.value)),o.value==="by-user"&&(e=e.filter(t=>t.byUser)),e.sort(C[o.value]),e}),{getPaginatedItems:L,getTotalPages:B,setPage:F,setPerPage:R,getCurrentPage:V,getPerPage:N}=ge(()=>J.value);x([o,r],()=>{F(1)});async function U(){const e=Z(M);if(e)return A(e),h(e[0]),e;k(!0),T(null);try{const t=await ie();return A(t),h(t[0]),_(M,t),t}catch(t){const a=t.message||"Error fetching joke types",u=["general","programming","knock-knock","dad"];return h(u[0]),A(u),T(a),console.error(a),u}finally{k(!1)}}async function H(){const e=ee(v);if(e)return f(e),e;k(!0),T(null);try{const t=await pe();return f(t),_(v,t),t}catch(t){const a=t.message||"Error fetching jokes";return T(a),console.error(a),[]}finally{k(!1)}}function K(e,t){const a=[...S()],u=a.find(w=>w.id===e);u&&(u.rating=t,f(a),_(v,a))}function Y(e){const t=[...s.value];t.unshift({...e,id:Date.now(),byUser:!0}),f(t),_(v,t)}function $(e,t){const a=[...s.value],u=a.findIndex(w=>w.id===e);u!==-1&&(a[u]={...a[u],...t,id:e,byUser:!0},f(a),_(v,a))}function z(e){const t=s.value.filter(a=>a.id!==e);f(t),_(v,t)}function q(){return o.value==="by-user"&&J.value.length===0?[]:L()}function G(e){o.value=e}function Q(e){c.value=e}function A(e){i.value=e}function f(e){s.value=e}function S(){return s.value}function W(e){n.value=e}function h(e){r.value=e}function k(e){d.value=e}function T(e){p.value=e}return{loadJokeTypes:U,getTypes:()=>i.value,setTypeSelected:h,getTypeSelected:()=>r.value,loadJokes:H,getJokes:S,addJoke:Y,updateJoke:$,removeJokeById:z,setJokeRatingById:K,setJokeId:Q,getJokeId:()=>c.value,setModeForm:W,getModeForm:()=>n.value,setSortBy:G,getSortBy:()=>o.value,getSortTypes:()=>y,paginatedJokes:q,getTotalPages:B,setCurrentPage:F,getCurrentPage:V,setPerPage:R,getPerPage:N,setLoading:k,getLoading:()=>d.value,getError:()=>p.value}}),fe=te({__name:"JokesPage",setup(s){const c=m(()=>P(()=>import("./AppHeader-DNdBA9B7.js"),__vite__mapDeps([0,1,2,3]))),n=m(()=>P(()=>import("./AppJokeList-CA1Dey_A.js"),__vite__mapDeps([4,1,2]))),i=m(()=>P(()=>import("./AppToolBar-D5bMz7cC.js"),__vite__mapDeps([5,1,2,6]))),r=m(()=>P(()=>import("./AppFormJoke-DdUVAVnb.js"),__vite__mapDeps([7,1,2,8]))),d=m(()=>P(()=>import("./AppFooter-BFkuijAl.js"),__vite__mapDeps([9,1,2,10]))),p=de(),{loadJokes:y,getModeForm:o,getJokes:C}=p;oe(async()=>{await y()});const J=E(()=>o()===O&&C().length===0);return(L,B)=>(I(),ae(ue,null,[j(g(c)),se("main",{class:ce(["app-main",{"app-main--empty":J.value}])},[j(g(i)),j(re,{name:"slide",mode:"out-in"},{default:ne(()=>[g(o)()===g(O)?(I(),b(g(n),{key:"joke-list"})):(I(),b(g(r),{mode:g(o)(),key:"joke-form"},null,8,["mode"]))]),_:1})],2),j(g(d))],64))}}),_e=le(fe,[["__scopeId","data-v-386f37a0"]]),ye=Object.freeze(Object.defineProperty({__proto__:null,default:_e},Symbol.toStringTag,{value:"Module"}));export{ye as J,de as u};
